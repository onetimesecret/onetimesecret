# etc/defaults/logging.defaults.yaml

# Onetime Secret - Logging Configuration
#
# Strategic categories for debugging and operational instrumentation:
#   Auth     - Authentication/authorization flows
#   Session  - Session lifecycle management
#   HTTP     - HTTP requests, responses, and middleware
#   Familia  - Redis operations via Familia ORM
#   Otto     - Otto framework operations
#   Rhales   - Rhales template rendering (future)
#   Sequel   - Database queries and operations
#   Secret   - Core business value (create/view/burn)
#   App      - Default fallback for application-level logging
#
# Environment variable overrides:
#   LOG_LEVEL=debug                       - Set global log level
#   DEBUG_LOGGERS=Auth:debug,Secret:trace - Set specific logger levels
#
# Application category quick flags:
#   DEBUG_AUTH=1                          - Quick debug flag for Auth
#   DEBUG_SESSION=1                       - Quick debug flag for Session
#   DEBUG_HTTP=1                          - Quick debug flag for HTTP
#   DEBUG_SECRET=1                        - Quick debug flag for Secret
#
# External library debug flags (use library's own flags):
#   FAMILIA_DEBUG=1                       - Familia's built-in debug flag
#   FAMILIA_SAMPLE_RATE=0.01              - Familia command sampling (0.0-1.0)
#
# For libraries without built-in flags, use DEBUG_LOGGERS:
#   DEBUG_LOGGERS=Sequel:debug,Rhales:trace

# Global default log level
# Options: trace, debug, info, warn, error, fatal
default_level: info

# Output formatter
# Options: color, json, default
# - color: Human-readable with ANSI colors, timestamps, PID/thread (recommended)
# - json: Structured JSON for production log shipping
# - default: Plain text without colors
formatter: color

# Named logger levels
# Each category can be configured independently. Loggers added here are
# made available by the setup_loggers initializer.
loggers:
  App: info       # Default application logger
  Auth: info      # Authentication/authorization flows
  Billing: info   # Only used when billing.enabled=true
  Boot: info      # During initialization
  Familia: warn   # Redis/Familia main database operations
  HTTP: warn      # HTTP requests and middleware operations
  Otto: warn      # Otto framework operations
  Rhales: error   # Rhales template rendering (suppress unescaped HTML warnings)
  Secret: info    # Secret lifecycle (create, view, burn)
  Sequel: warn    # Database queries and operations (SQL logged at :trace level)
  Session: info   # Session lifecycle (create, update, destroy)

# HTTP request logging configuration
http:
  enabled: true
  level: info

  # Capture mode determines what data is logged per request
  # Options: minimal, standard, debug
  #   minimal:  method, path, status, duration
  #   standard: + request_id, ip
  #   debug:    + params, headers, session_id
  capture: standard

  # Threshold for logging slow requests as warnings (milliseconds)
  slow_request_ms: 1000

  # Paths to ignore (glob patterns)
  ignore_paths:
    - /api/v1/status
    - /api/v2/status
    - /health
    - /healthcheck
    - /favicon.ico
    - /_vite/*
    - /assets/*
