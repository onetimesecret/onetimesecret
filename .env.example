##
# Onetime Secret - Environment Variables (updated 2025-11-28)
#
# Usage:
#
#   $ cp -np .env.example .env
#   $ source .env
#   $ bundle exec thin (etc...)
#

SERVER_TYPE=thin
PORT=3000

AUTHENTICATION_MODE=simple

# Only available in full mode
# Security hardening features (enabled by default)
AUTH_HARDENING_ENABLED=true
AUTH_ACTIVE_SESSIONS_ENABLED=true
AUTH_REMEMBER_ME_ENABLED=true
AUTH_VERIFY_ACCOUNT_ENABLED=true

# Optional authentication methods (disabled by default)
AUTH_EMAIL_AUTH_ENABLED=false
AUTH_WEBAUTHN_ENABLED=false

#PORT=3000

# Core application settings
HOST="localhost:${PORT:-3000}"
SSL="true"
SECRET="CHANGEME"
REDIS_URL="redis://CHANGEME@redis:6379/0"
STDOUT_SYNC=true
RACK_ENV=production
NODE_ENV=production

COLONEL="CHANGEME@EXAMPLE.com"


# Multi-Factor Authentication (MFA)
# Enables TOTP-based 2FA and recovery codes via Rodauth
AUTH_MFA_ENABLED=false
HMAC_SECRET=

# Secret link verification (Familia::VerifiableIdentifier)
# Used to generate secret/receipt keys; allows high-confidence verification
# that a link was generated by this instance
VERIFIABLE_ID_HMAC_SECRET=

# Cross-region subscription federation (must be identical across all regions)
FEDERATION_HMAC_SECRET=

# UI_HOMEPAGE_MODE=
# UI_HOMEPAGE_REQUEST_HEADER=

# Authentication settings
AUTH_ENABLED=true
AUTH_SIGNUP=true
AUTH_SIGNIN=true
AUTH_AUTOVERIFY=false

# Email settings
EMAILER_MODE=smtp
EMAILER_REGION=
FROM_EMAIL=
FROMNAME=

SMTP_HOST=
SMTP_PORT=
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_AUTH=login
SMTP_TLS=true

VERIFIER_EMAIL=
#VERIFIER_DOMAIN=

# One of: DefaultLogo.vue, LegacyLogo.vue, OnetimeSecretLogo.vue
LOGO_URL=DefaultLogo.vue

#AUTH_DATABASE_URL=sqlite://data/auth.db
#AUTH_DATABASE_URL_MIGRATIONS=postgresql://onetime_migrator:CHANGE_ME_MIGRATION_PASSWORD@localhost/onetime_auth

# Footer Links
FOOTER_LINKS=false
TERMS_URL=
TERMS_EXTERNAL=
PRIVACY_URL=
PRIVACY_EXTERNAL=
STATUS_URL=
STATUS_EXTERNAL=
ABOUT_URL=
ABOUT_EXTERNAL=
CONTACT_URL=

# Feature flags
REGIONS_ENABLED=true
JURISDICTION=CHANGEME
DOMAINS_ENABLED=false
DEFAULT_DOMAIN=
I18N_ENABLED=false
I18N_DEFAULT_LOCALE=en

# Secret TTL Configuration
#
# These settings control the time-to-live (TTL) limits for secrets.
#
# TTL_OPTIONS: Available TTL choices for users (space-separated seconds)
# Example: TTL_OPTIONS='300 3600 86400 604800 2592000'
#          (5 min, 1 hour, 1 day, 7 days, 30 days)
#TTL_OPTIONS=
#
# DEFAULT_TTL: Default TTL when not specified (in seconds)
#DEFAULT_TTL=604800
#
# PLAN_TTL_ANONYMOUS: Maximum TTL for anonymous/free tier users (seconds)
# This matches the environment variable from PR #2393 for upgrade continuity.
# Default: 604800 (7 days). Maximum allowed: 31536000 (365 days).
# Values are clamped between 0 and 365 days. Invalid values use the default.
#
# For Docker deployments wanting 30-day TTL:
#   TTL_OPTIONS='604800 1209600 2592000'
#   PLAN_TTL_ANONYMOUS=2592000
#
# @see https://github.com/onetimesecret/onetimesecret/issues/2390
#PLAN_TTL_ANONYMOUS=604800

# Email settings
EMAILER_MODE=smtp
EMAILER_REGION=
FROM_EMAIL=
# Deprecated: FROMNAME
FROM_NAME=
# The address used in the To: field when a recipient clicks reply
REPLYTO_EMAIL=

SMTP_HOST=
SMTP_PORT=
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_AUTH=login
SMTP_TLS=true

VERIFIER_EMAIL=
VERIFIER_DOMAIN=

# Job System (RabbitMQ)
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_VHOST=/
RABBITMQ_USER=guest
RABBITMQ_PASS=guest
SNEAKERS_PID_PATH=tmp/pids/sneakers.pid
SCHEDULER_PID_PATH=tmp/pids/scheduler.pid

# Security settings
CSP_ENABLED=false

# Monitoring and Diagnostics
DIAGNOSTICS_ENABLED=false
SENTRY_DSN_BACKEND=
SENTRY_DSN_FRONTEND=
SENTRY_VUE_TRACK_COMPONENTS=true
SENTRY_SAMPLE_RATE=
SENTRY_MAX_BREADCRUMBS=
SENTRY_LOG_ERRORS=true
HEADER_PREFIX=ONETIME_

# Logging Configuration
# Set to 'false' to disable request logging
LOG_HTTP_REQUESTS=

# Domain validation and certificate management
# Options: passthrough (default), approximated, caddy_on_demand
DOMAINS_VALIDATION_STRATEGY=
APPROXIMATED_API_KEY=
APPROXIMATED_PROXY_IP=
APPROXIMATED_PROXY_HOST=
APPROXIMATED_PROXY_NAME=
APPROXIMATED_VHOST_TARGET=

# Development settings
FRONTEND_HOST=
VITE_API_BASE_URL=
