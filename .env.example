##
# Onetime Secret - Environment Variables (updated 2025-11-28)
#
# Usage:
#
#   $ cp -np .env.example .env
#   $ source .env
#   $ bundle exec thin (etc...)
#

# NOTE: set -a enables automatic export mode. All variable assignments
# between set -a and set +a will be exported to child processes without
# needing 'export' keyword.
set -a

SERVER_TYPE=thin

#PORT=3000

# Core application settings
HOST="localhost:${PORT:-3000}"
SSL="true"
SECRET="CHANGEME"
REDIS_URL="redis://CHANGEME@redis:6379/0"
STDOUT_SYNC="false"
ONETIME_DEBUG="false"
RACK_ENV=production

COLONEL="CHANGEME@EXAMPLE.com"

# Authentication settings
AUTH_ENABLED=true
AUTH_SIGNUP=true
AUTH_SIGNIN=true
AUTH_AUTOVERIFY=false

# Email settings
EMAILER_MODE=smtp
EMAILER_REGION=
FROM_EMAIL=ots@example.com
FROM_NAME=OTS

SMTP_HOST=127.0.0.1
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_AUTH=
SMTP_TLS=false

VERIFIER_EMAIL=
#VERIFIER_DOMAIN=

# One of: DefaultLogo.vue, LegacyLogo.vue, OnetimeSecretLogo.vue
LOGO_URL=DefaultLogo.vue

# Footer Links
FOOTER_LINKS=false
TERMS_URL=
TERMS_EXTERNAL=
PRIVACY_URL=
PRIVACY_EXTERNAL=
STATUS_URL=
STATUS_EXTERNAL=
ABOUT_URL=
ABOUT_EXTERNAL=
CONTACT_URL=

# Feature flags
INCOMING_ENABLED=true
REGIONS_ENABLED=true
JURISDICTION=CHANGEME
DOMAINS_ENABLED=false
DEFAULT_DOMAIN=
I18N_ENABLED=false
I18N_DEFAULT_LOCALE=en

# Secret TTL Configuration
# Default TTL when creating secrets (in seconds)
DEFAULT_TTL=
# Available TTL options shown to users (space-separated seconds)
# Example: '1800 43200 86400 604800' for 30m, 12h, 24h, 7d
TTL_OPTIONS=
# Plan TTL limits - max TTL allowed per plan (in seconds)
# These override the default hardcoded values (max: 31536000 = 365 days)
PLAN_TTL_ANONYMOUS=    # Default: 604800 (7 days)
PLAN_TTL_BASIC=        # Default: 1209600 (14 days)
PLAN_TTL_IDENTITY=     # Default: 2592000 (30 days)

INCOMING_DEFAULT_TTL=604800        # Default TTL for incoming secrets (seconds; 604800 = 7 days)
INCOMING_DEFAULT_PASSPHRASE=       # Optional passphrase applied to all incoming secrets

# Incoming secrets recipients (up to 4). Format: email[,display name]
# Name is optional; omitting it defaults to the local part of the email address.
# Emails are hashed at startup and never exposed in API responses.
# Add INCOMING_RECIPIENT_2, _3, _4 for additional recipients.
INCOMING_RECIPIENT_1="support@example.com,Support"

# Security settings
AUTHENTICITY_TYPE=altcha
AUTHENTICITY_SECRET_KEY='<REPLACE_WITH_STRONG_HMAC_KEY>'
CSP_ENABLED=false

# Monitoring and Diagnostics
DIAGNOSTICS_ENABLED=false
SENTRY_DSN_BACKEND=
SENTRY_DSN_FRONTEND=
SENTRY_VUE_TRACK_COMPONENTS=true
SENTRY_SAMPLE_RATE=
SENTRY_MAX_BREADCRUMBS=
SENTRY_LOG_ERRORS=true
HEADER_PREFIX=ONETIME_

# Logging Configuration
# Set to 'false' to disable request logging
LOG_HTTP_REQUESTS=

# Homepage Mode
# Controls which homepage experience to show based on IP address or headers
# Mode: 'internal' (full homepage) or 'external' (restricted homepage) or blank (default)
UI_HOMEPAGE_MODE=
# Comma-separated list of CIDR ranges (e.g., "10.0.0.0/8,192.168.0.0/16")
UI_HOMEPAGE_MATCHING_CIDRS=
# HTTP header name to check as fallback (default: O-Homepage-Mode)
UI_HOMEPAGE_MODE_HEADER=
# Default mode to apply when IP doesn't match CIDRs: 'internal', 'external', or blank (nil)
UI_HOMEPAGE_DEFAULT_MODE=
# Number of trusted proxies (0=direct, 1=single proxy, 2+=multiple proxies)
UI_HOMEPAGE_TRUSTED_PROXY_DEPTH=
# Which header to use for IP: X-Forwarded-For, Forwarded, or Both
UI_HOMEPAGE_TRUSTED_IP_HEADER=

# Development settings
FRONTEND_HOST=
VITE_API_BASE_URL=

# Controls the secret link popup behavior.
# Valid values: 'copy-first' (default), 'two-step'
VITE_POPUP_MODE=

# Set +a restores default behavior where variables must be explicitly exported
set +a
