# apps/api/v2/routes.txt
#
# Otto Routes - V2 API (Public secrets API)
# Using direct Logic class routing with authentication strategies
#
# V2 API returns string values for all fields.

# Receipts (creator-facing secret metadata)
GET    /receipt/recent                            V2::Logic::Secrets::ListReceipts response=json auth=basicauth,noauth
POST   /receipt/:identifier/burn                  V2::Logic::Secrets::BurnSecret response=json auth=basicauth,noauth
GET    /receipt/:identifier                       V2::Logic::Secrets::ShowReceipt response=json auth=basicauth,noauth
PATCH  /receipt/:identifier                       V2::Logic::Secrets::UpdateReceipt response=json auth=basicauth,noauth
GET    /private/recent                            V2::Logic::Secrets::ListReceipts response=json auth=basicauth,noauth
POST   /private/:identifier/burn                  V2::Logic::Secrets::BurnSecret response=json auth=basicauth,noauth
GET    /private/:identifier                       V2::Logic::Secrets::ShowReceipt response=json auth=basicauth,noauth
PATCH  /private/:identifier                       V2::Logic::Secrets::UpdateReceipt response=json auth=basicauth,noauth

# Secrets - Public (Anonymous allowed)
GET    /secret/:identifier                        V2::Logic::Secrets::ShowSecret response=json auth=basicauth,noauth
GET    /secret/:identifier/status                 V2::Logic::Secrets::ShowSecretStatus response=json auth=basicauth,noauth
POST   /secret/status                             V2::Logic::Secrets::ListSecretStatus response=json auth=basicauth,noauth
POST   /secret/:identifier/reveal                 V2::Logic::Secrets::RevealSecret response=json auth=basicauth,noauth
POST   /secret/generate                           V2::Logic::Secrets::GenerateSecret response=json auth=basicauth,noauth
POST   /secret/conceal                            V2::Logic::Secrets::ConcealSecret response=json auth=basicauth,noauth

# OPTIONS preflight for CORS (public)
OPTIONS /secret/generate                          V2::Logic::Secrets::GenerateSecret response=json
OPTIONS /secret/conceal                           V2::Logic::Secrets::ConcealSecret response=json

# Meta/Public endpoints (static information uses class methods)
GET    /supported-locales                         V2::Logic::Meta.get_supported_locales response=json
GET    /status                                    V2::Logic::Meta.system_status response=json
GET    /version                                   V2::Logic::Meta.system_version response=json

# OTTO ADVANCED ROUTES SYNTAX - QUICK REFERENCE
# ==============================================
#
# Added in v1.5.0+. Basic syntax:
#
# VERB /path Target param1=value1 param2=value2
#
# RESPONSE TYPES
# --------------
# response=json     - JSON API response
# response=view     - HTML view response
# response=redirect - HTTP redirect
# response=auto     - Content negotiation
#
# Examples:
# GET  /api/users    App#list_users response=json
# GET  /dashboard    App#dashboard response=view
# GET  /login        App#redirect response=redirect
# GET  /data         App#data response=auto
#
#
# LOGIC CLASSES (NEW!)
# --------------------
# Route directly to a class (no . or # in target).
# Class gets: initialize(session, user, params, locale)
#
# Examples:
# GET  /logic/simple      SimpleLogic
# GET  /admin/panel       Admin::Panel
# POST /data/processor    DataProcessor response=json
#
# MULTIPLE PARAMETERS
# -------------------
# Combine any parameters with spaces:
#
# GET  /api/admin    App#admin auth=role:admin response=json
# POST /api/secure   App#secure auth=basicauth,noauth response=json
#
# NAMESPACED CLASSES
# ------------------
# Class methods:  Namespace::Class.method
# Instance methods: Namespace::Class#method
#
# Examples:
# GET  /v2/admin     V2::Admin.show response=view
# POST /modules/auth Modules::Auth#process response=json
#
# CUSTOM PARAMETERS
# -----------------
# Add your own key=value parameters:
#
# GET /config  App#config env=production debug=true
# GET /api/v1  App#api version=1.0 response=json
#
# PARAMETER RULES
# ---------------
# - Space-separated after the target
# - key=value format
# - Values can contain = signs: config=host=localhost
# - Bad params (no =) are ignored
# - Order doesn't matter
#
# COMMON PATTERNS
# ---------------
# # JSON API with CSRF exemption for HTTP basic authentication
# POST /api/data  App#data response=json auth=basicauth csrf=exempt
#
# # Admin view with authentication
# GET /admin  App#admin auth=role:admin response=view
#
# # Logic class with JSON response
# POST /processor  DataProcessor response=json
#
# # Complex route with all features
# PUT /api/admin  App#update auth=role:admin response=json
#
# ROUTE TARGETS
# -------------
# App.method       - Class method
# App#method       - Instance method
# LogicClass       - Logic class (new!)
# Namespace::Class - Namespaced targets
#
# That's it! Advanced routing in Otto is just adding parameters after your target.
