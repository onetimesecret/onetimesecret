# apps/api/v3/routes.txt
#
# Otto Routes - V3 API (Public secrets API)
# Using direct Logic class routing with authentication strategies
#
# V3 API returns native JSON types (numbers, booleans, null) instead of
# string-serialized values. The shared endpoints are available without
# authentication but the secrets API requires it (unlike V2).

# Secrets - Authenticated (require session)
GET    /receipt/recent                            V3::Logic::Secrets::ListReceipts response=json auth=sessionauth
GET    /receipt/:identifier                       V3::Logic::Secrets::ShowReceipt response=json auth=sessionauth
PATCH  /receipt/:identifier                       V3::Logic::Secrets::UpdateReceipt response=json auth=sessionauth
POST   /receipt/:identifier/burn                  V3::Logic::Secrets::BurnSecret response=json auth=sessionauth
POST   /secret/conceal                            V3::Logic::Secrets::ConcealSecret response=json auth=sessionauth
POST   /secret/generate                           V3::Logic::Secrets::GenerateSecret response=json auth=sessionauth
GET    /secret/:identifier                        V3::Logic::Secrets::ShowSecret response=json auth=sessionauth
POST   /secret/:identifier/reveal                 V3::Logic::Secrets::RevealSecret response=json auth=sessionauth

# Guest Routes (public access - anonymous or authenticated)
POST   /guest/secret/conceal                      V3::Logic::Secrets::ConcealSecret response=json auth=noauth
POST   /guest/secret/generate                     V3::Logic::Secrets::GenerateSecret response=json auth=noauth
GET    /guest/secret/:identifier                  V3::Logic::Secrets::ShowSecret response=json auth=noauth
POST   /guest/secret/:identifier/reveal           V3::Logic::Secrets::RevealSecret response=json auth=noauth
GET    /guest/receipt/:identifier                 V3::Logic::Secrets::ShowReceipt response=json auth=noauth
POST   /guest/receipt/:identifier/burn            V3::Logic::Secrets::BurnSecret response=json auth=noauth
POST   /guest/receipts                            V3::Logic::Secrets::ShowMultipleReceipts response=json auth=noauth

# Meta/Public endpoints (static information, no auth required)
GET    /secret/:identifier/status                 V3::Logic::Secrets::ShowSecretStatus response=json auth=noauth
POST   /secret/status                             V3::Logic::Secrets::ListSecretStatus response=json auth=noauth

# OPTIONS preflight for CORS (public)
OPTIONS /secret/generate                          V3::Logic::Secrets::GenerateSecret response=json
OPTIONS /secret/conceal                           V3::Logic::Secrets::ConcealSecret response=json

# Meta/Public endpoints (static information uses class methods)
GET    /supported-locales                         V3::Logic::Meta.get_supported_locales response=json
GET    /status                                    V3::Logic::Meta.system_status response=json
GET    /version                                   V3::Logic::Meta.system_version response=json
POST   /feedback                                  V3::Logic::ReceiveFeedback response=json auth=noauth

# Incoming secrets endpoints (anonymous secret submission to configured recipients)
GET    /incoming/config                           V3::Logic::Incoming::GetConfig response=json auth=noauth
POST   /incoming/secret                           V3::Logic::Incoming::CreateIncomingSecret response=json auth=noauth
POST   /incoming/validate                         V3::Logic::Incoming::ValidateRecipient response=json auth=noauth

# OTTO ADVANCED ROUTES SYNTAX - QUICK REFERENCE
# ==============================================
#
# Added in v1.5.0+. Basic syntax:
#
# VERB /path Target param1=value1 param2=value2
#
# RESPONSE TYPES
# --------------
# response=json     - JSON API response
# response=view     - HTML view response
# response=redirect - HTTP redirect
# response=auto     - Content negotiation
#
# Examples:
# GET  /api/users    App#list_users response=json
# GET  /dashboard    App#dashboard response=view
# GET  /login        App#redirect response=redirect
# GET  /data         App#data response=auto
#
#
# LOGIC CLASSES (NEW!)
# --------------------
# Route directly to a class (no . or # in target).
# Class gets: initialize(session, user, params, locale)
#
# Examples:
# GET  /logic/simple      SimpleLogic
# GET  /admin/panel       Admin::Panel
# POST /data/processor    DataProcessor response=json
#
# MULTIPLE PARAMETERS
# -------------------
# Combine any parameters with spaces:
#
# GET  /api/admin    App#admin auth=role:admin response=json
