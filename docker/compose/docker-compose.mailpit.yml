##
# DOCKER COMPOSE - MAILPIT (EMAIL TESTING)
#
# Local SMTP capture server for development and testing.
# All outbound email is intercepted â€” nothing is delivered.
#
# Include alongside the simple stack:
#
#     include:
#       - path: docker/compose/docker-compose.simple.yml
#       - path: docker/compose/docker-compose.mailpit.yml
#
# Then set in .env (or export before running):
#
#     SMTP_HOST=mailpit
#     SMTP_PORT=1025
#     SMTP_TLS=
#     SMTP_AUTH=
#
# Web UI: http://localhost:8025
# SMTP:   mailpit:1025 (from within the app container)
#
# Note: For use with docker-compose.full.yml, add mailpit to
# onetime-network so it can communicate with the app service.

services:
  mailpit:
    image: axllent/mailpit
    container_name: onetime-mailpit
    logging:
      driver: 'json-file'
      options:
        max-size: '60m'
        max-file: '3'
    ports:
      - '1025:1025' # SMTP
      - '8025:8025' # Web UI
    restart: unless-stopped
